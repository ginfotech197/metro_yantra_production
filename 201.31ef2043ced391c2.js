"use strict";(self.webpackChunkbase_project=self.webpackChunkbase_project||[]).push([[201],{5480:(q,m,o)=>{o.d(m,{q:()=>l});var p=o(4859),T=o(4144),h=o(4650);let l=(()=>{class u{}return u.\u0275fac=function(v){return new(v||u)},u.\u0275mod=h.oAB({type:u}),u.\u0275inj=h.cJS({imports:[p.ot,T.c]}),u})()},8201:(q,m,o)=>{o.r(m),o.d(m,{TurnOverReportModule:()=>ot});var p=o(6895),T=o(2510),h=o(5226),l=o.n(h),u=o(2340),t=o(4650),v=o(7654),U=o(2088),x=o(1397),S=o(1140),C=o(529),_=o(4859),g=o(9549),O=o(4144),c=o(4006),f=o(455),Z=o(9602);function E(r,s){1&r&&(t.TgZ(0,"marquee",13),t._uU(1,"Reports available only for last 30 days"),t.qZA())}function M(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"button",21),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.searchStockist())}),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()}if(2&r){const e=t.oxw(2);t.xp6(3),t.Oqu(e.userData.userName),t.xp6(2),t.Oqu(e.turnOverreport.total_bet),t.xp6(2),t.Oqu(e.turnOverreport.total_win_claimed),t.xp6(2),t.Oqu(e.turnOverreport.total_win_unclaimed),t.xp6(2),t.Oqu(e.turnOverreport.profit),t.xp6(2),t.Oqu(e.turnOverreport.total_commission)}}function y(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th",15)(4,"mat-slide-toggle",16),t.NdJ("change",function(a){t.CHM(e);const i=t.oxw();return t.KtG(i.onToggleSuperStockist(a))}),t._uU(5,"All "),t.qZA()(),t.TgZ(6,"th",17)(7,"label"),t._uU(8,"Search"),t.qZA(),t.TgZ(9,"input",18),t.NdJ("ngModelChange",function(a){t.CHM(e);const i=t.oxw();return t.KtG(i.superStockistSearch=a)}),t.qZA()()(),t.TgZ(10,"tr")(11,"th",19),t._uU(12,"SS Name"),t.qZA(),t.TgZ(13,"th",19),t._uU(14,"Total Bet"),t.qZA(),t.TgZ(15,"th",19),t._uU(16,"Total Win Claimed"),t.qZA(),t.TgZ(17,"th",19),t._uU(18,"Total Win Unclaimed"),t.qZA(),t.TgZ(19,"th",19),t._uU(20,"Profit"),t.qZA(),t.TgZ(21,"th",19),t._uU(22,"Total Commission"),t.qZA()()(),t.TgZ(23,"tbody"),t.YNc(24,M,14,6,"tr",20),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(4),t.Q6J("checked",1==e.superStockistToggle),t.xp6(5),t.Q6J("ngModel",e.superStockistSearch),t.xp6(15),t.Q6J("ngIf",e.turnOverreport)}}function k(r,s){1&r&&(t.TgZ(0,"marquee",13),t._uU(1,"Reports available only for last 30 days"),t.qZA())}function D(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",23)(4,"button",24),t.NdJ("click",function(){const i=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.searchTerminal(i))}),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA()()}if(2&r){const e=s.$implicit,n=s.index;t.xp6(2),t.Oqu(n+1),t.xp6(3),t.Oqu(e.stockist_name),t.xp6(2),t.Oqu(e.total_bet),t.xp6(2),t.Oqu(e.total_win_claimed),t.xp6(2),t.Oqu(e.total_win_unclaimed),t.xp6(2),t.Oqu(e.profit),t.xp6(2),t.Oqu(e.total_commission),t.xp6(2),t.Oqu((e.total_bet-e.total_commission-e.total_win_claimed).toFixed(2))}}function J(r,s){if(1&r&&(t.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Sl No."),t.qZA(),t.TgZ(5,"th",19),t._uU(6,"S Name"),t.qZA(),t.TgZ(7,"th",19),t._uU(8,"Total Bet"),t.qZA(),t.TgZ(9,"th",19),t._uU(10,"Total Win Claimed"),t.qZA(),t.TgZ(11,"th",19),t._uU(12,"Total Win Unclaimed"),t.qZA(),t.TgZ(13,"th",19),t._uU(14,"Profit"),t.qZA(),t.TgZ(15,"th",19),t._uU(16,"Total Commission"),t.qZA(),t.TgZ(17,"th",19),t._uU(18,"NTP"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,D,18,8,"tr",22),t.qZA()()),2&r){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.stockistOverSuperStockist)}}function N(r,s){1&r&&(t.TgZ(0,"marquee",13),t._uU(1,"Reports available only for last 30 days"),t.qZA())}function F(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"button",21),t.NdJ("click",function(){const i=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.searchTerminalBarCode(i))}),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA()()}if(2&r){const e=s.$implicit,n=s.index;t.xp6(2),t.Oqu(n+1),t.xp6(3),t.Oqu(e.terminal_name),t.xp6(2),t.Oqu(e.total_bet),t.xp6(2),t.Oqu(e.total_win_claimed),t.xp6(2),t.Oqu(e.total_win_unclaimed),t.xp6(2),t.Oqu(e.profit),t.xp6(2),t.Oqu(e.total_commission),t.xp6(2),t.Oqu((e.total_bet-e.total_commission-e.total_win_claimed).toFixed(2))}}function B(r,s){if(1&r&&(t.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Sl No."),t.qZA(),t.TgZ(5,"th",19),t._uU(6,"T Name"),t.qZA(),t.TgZ(7,"th",19),t._uU(8,"Total Bet"),t.qZA(),t.TgZ(9,"th",19),t._uU(10,"Total Win Claimed"),t.qZA(),t.TgZ(11,"th",19),t._uU(12,"Total Win Unclaimed"),t.qZA(),t.TgZ(13,"th",19),t._uU(14,"Profit"),t.qZA(),t.TgZ(15,"th",19),t._uU(16,"Total Commission"),t.qZA(),t.TgZ(17,"th",19),t._uU(18,"NTP"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,F,18,8,"tr",22),t.qZA()()),2&r){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.terminalTurnOverReport)}}function I(r,s){1&r&&(t.TgZ(0,"marquee",13),t._uU(1,"Reports available only for last 30 days"),t.qZA())}function P(r,s){if(1&r&&(t.TgZ(0,"tr")(1,"td")(2,"button",25),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA()()),2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.barcode_number),t.xp6(2),t.Oqu(e.draw_time),t.xp6(2),t.Oqu(e.terminal_pin),t.xp6(2),t.Oqu("SINGLE DOUBLE TRIPLE"==e.game_name?"Triple chance":e.game_name),t.xp6(2),t.Oqu(e.ticket_taken_time),t.xp6(2),t.Oqu(e.total_quantity),t.xp6(2),t.Oqu(e.amount),t.xp6(2),t.Oqu(e.prize_value>0&&0==e.is_claimed?e.prize_value:"--"),t.xp6(2),t.Oqu(e.prize_value>0&&1==e.is_claimed?e.prize_value:"--"),t.xp6(2),t.Oqu(1==e.is_cancelled?"Yes":"No"),t.xp6(2),t.Oqu(e.result),t.xp6(2),t.Oqu(1==e.bonus?"N":e.bonus+"X")}}function Q(r,s){if(1&r&&(t.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Barcode"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Draw time"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Terminal"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Game"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Ticket take time"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Qty"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Play"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"UnClaimed"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Claimed"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Cancelled"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Result"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Bonus"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,P,26,12,"tr",22),t.qZA()()),2&r){const e=t.oxw();t.xp6(28),t.Q6J("ngForOf",e.barcodeReportRecords)}}let Y=(()=>{class r{constructor(e,n,a,i,d){this.superStockistReportService=e,this.masterTerminalService=n,this.gameService=a,this.adminReportService=i,this.http=d,this.thisYear=(new Date).getFullYear(),this.thisMonth=(new Date).getMonth(),this.thisDay=(new Date).getDate(),this.startDate=new Date(this.thisYear,this.thisMonth,this.thisDay),this.maxDate=new Date(this.thisYear,this.thisMonth,this.thisDay),this.minDate=new Date(this.thisYear,this.thisMonth,this.thisDay-30),this.StartDateFilter=this.startDate,this.EndDateFilter=this.startDate,this.pipe=new p.uU("en-US"),this.BASE_API_URL=u.N.BASE_API_URL,this.terminals=[],this.stockistOverSuperStockist=[],this.superStockistTurnOverReportEnabled=!0,this.stockistTurnOverReportEnabled=!1,this.terminalTurnOverReportEnabled=!1,this.superStockistTurnOverReport=[],this.stockistTurnOverReport=[],this.terminalTurnOverReport=[],this.terminalBarcodeTurnOverReportEnabled=!1,this.barcodeReportRecords=[],this.superStockistSearch=null,this.superStockistToggle=0,this.userData=JSON.parse(localStorage.getItem("user"))}ngOnInit(){this.terminals=this.masterTerminalService.getTerminals(),this.masterTerminalService.getTerminalListener().subscribe(e=>{this.terminals=e})}onToggleSuperStockist(e){this.superStockistToggle=!0===e.checked?1:0}searchTurnOverReport(){l().fire({title:"Please Wait !",html:"loading ...",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}});const e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),n=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.superStockistReportService.turnOverReport(e,n,this.userData.userId).subscribe(a=>{1===a.success&&(l().close(),this.turnOverreport=a.data,this.superStockistTurnOverReportEnabled=!0,this.stockistTurnOverReportEnabled=!1,this.terminalTurnOverReportEnabled=!1,this.terminalBarcodeTurnOverReportEnabled=!1)})}searchStockist(){l().fire({title:"Please Wait !",html:"It may take some time....",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}});const e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),n=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.adminReportService.adminStockistOverSuperStockist(e,n,this.userData.userId).subscribe(a=>{a.data&&(l().close(),this.stockistOverSuperStockist=a.data,this.superStockistTurnOverReportEnabled=!1,this.stockistTurnOverReportEnabled=!0)})}searchTerminal(e){l().fire({title:"Please Wait !",html:"It may take some time....",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}});const n=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),a=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.adminReportService.adminTerminalOverStockist(n,a,e.stockist_id).subscribe(i=>{i.data&&(l().close(),this.terminalTurnOverReport=i.data,this.superStockistTurnOverReportEnabled=!1,this.stockistTurnOverReportEnabled=!1,this.terminalTurnOverReportEnabled=!0)})}searchTerminalBarCode(e){l().fire({title:"Please Wait !",html:"It may take some time....",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}});const n=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),a=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.http.post(this.BASE_API_URL+"/terminal/turnOverReport",{startDate:n,endDate:a,terminalId:e.terminal_id}).subscribe(i=>{console.log("test"),l().close(),this.barcodeReportRecords=i.data,this.terminalTurnOverReportEnabled=!1,this.stockistTurnOverReportEnabled=!1,this.superStockistTurnOverReportEnabled=!1,this.terminalBarcodeTurnOverReportEnabled=!0})}revertBack(){!0===this.terminalTurnOverReportEnabled?(this.terminalTurnOverReportEnabled=!1,this.stockistTurnOverReportEnabled=!0,this.superStockistTurnOverReportEnabled=!1,this.terminalBarcodeTurnOverReportEnabled=!1):!0===this.stockistTurnOverReportEnabled?(this.terminalTurnOverReportEnabled=!1,this.stockistTurnOverReportEnabled=!1,this.superStockistTurnOverReportEnabled=!0,this.terminalBarcodeTurnOverReportEnabled=!1):!0===this.terminalBarcodeTurnOverReportEnabled&&(this.terminalTurnOverReportEnabled=!0,this.stockistTurnOverReportEnabled=!1,this.superStockistTurnOverReportEnabled=!1,this.terminalBarcodeTurnOverReportEnabled=!1)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(v.z),t.Y36(U.S),t.Y36(x.h),t.Y36(S.Q),t.Y36(C.eN))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-turn-over-report"]],decls:31,vars:21,consts:[["behavior","","class","blink","direction","","style","color: red !important;",4,"ngIf"],[1,"pt-1","d-flex"],[1,"col"],["appearance","fill"],["matInput","",3,"max","min","matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"ngModel","ngModelChange"],["picker",""],["picker1",""],["mat-button","","color","accent",2,"font-size","20px",3,"click"],["mat-button","",3,"hidden","click"],[1,"material-icons"],["class","table table-bordered table-dark",4,"ngIf"],["behavior","","direction","",1,"blink",2,"color","red !important"],[1,"table","table-bordered","table-dark"],["scope","colgroup","colspan","3",1,"text-center"],[3,"checked","change"],["scope","colgroup","colspan","2",1,"text-center"],["placeholder","Super Stockist Search",1,"col-12",3,"ngModel","ngModelChange"],["scope","col"],[4,"ngIf"],["mat-button","",2,"color","yellow",3,"click"],[4,"ngFor","ngForOf"],[2,"color","yellow"],["mat-button","",3,"click"],[1,"btn",2,"color","white !important"]],template:function(e,n){if(1&e&&(t.YNc(0,E,2,0,"marquee",0),t.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Start date"),t.qZA(),t.TgZ(6,"input",4),t.NdJ("ngModelChange",function(i){return n.StartDateFilter=i}),t.qZA(),t._UZ(7,"mat-datepicker-toggle",5),t.TgZ(8,"mat-datepicker",6,7),t.NdJ("ngModelChange",function(i){return n.StartDateFilter=i}),t.qZA()()(),t.TgZ(10,"div",2)(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"End date"),t.qZA(),t.TgZ(14,"input",4),t.NdJ("ngModelChange",function(i){return n.EndDateFilter=i}),t.qZA(),t._UZ(15,"mat-datepicker-toggle",5),t.TgZ(16,"mat-datepicker",6,8),t.NdJ("ngModelChange",function(i){return n.EndDateFilter=i}),t.qZA()()(),t.TgZ(18,"button",9),t.NdJ("click",function(){return n.searchTurnOverReport()}),t._uU(19,"Search"),t.qZA()(),t.TgZ(20,"div")(21,"button",10),t.NdJ("click",function(){return n.revertBack()}),t.TgZ(22,"span",11),t._uU(23,"arrow_back"),t.qZA()(),t.YNc(24,y,25,3,"table",12),t.YNc(25,k,2,0,"marquee",0),t.YNc(26,J,21,1,"table",12),t.YNc(27,N,2,0,"marquee",0),t.YNc(28,B,21,1,"table",12),t.YNc(29,I,2,0,"marquee",0),t.YNc(30,Q,29,1,"table",12),t.qZA()),2&e){const a=t.MAs(9),i=t.MAs(17);t.Q6J("ngIf",n.superStockistTurnOverReportEnabled),t.xp6(6),t.Q6J("max",n.maxDate)("min",n.minDate)("matDatepicker",a)("ngModel",n.StartDateFilter),t.xp6(1),t.Q6J("for",a),t.xp6(1),t.Q6J("ngModel",n.StartDateFilter),t.xp6(6),t.Q6J("max",n.maxDate)("min",n.minDate)("matDatepicker",i)("ngModel",n.EndDateFilter),t.xp6(1),t.Q6J("for",i),t.xp6(1),t.Q6J("ngModel",n.EndDateFilter),t.xp6(5),t.Q6J("hidden",n.superStockistTurnOverReportEnabled),t.xp6(3),t.Q6J("ngIf",n.superStockistTurnOverReportEnabled),t.xp6(1),t.Q6J("ngIf",n.stockistTurnOverReportEnabled),t.xp6(1),t.Q6J("ngIf",n.stockistTurnOverReportEnabled),t.xp6(1),t.Q6J("ngIf",n.terminalTurnOverReportEnabled),t.xp6(1),t.Q6J("ngIf",n.terminalTurnOverReportEnabled),t.xp6(1),t.Q6J("ngIf",n.terminalBarcodeTurnOverReportEnabled),t.xp6(1),t.Q6J("ngIf",n.terminalBarcodeTurnOverReportEnabled)}},dependencies:[p.sg,p.O5,_.lW,g.KE,g.hX,g.R9,O.Nt,c.Fj,c.JJ,c.On,f.Rr,Z.Mq,Z.hl,Z.nW],styles:[".blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blinker 1.5s linear infinite;color:red;font-family:sans-serif}@keyframes _ngcontent-%COMP%_blinker{50%{opacity:0}}"]}),r})();const L=[{path:"",canActivate:[o(3311).c],component:Y}];let w=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[T.Bz.forChild(L),T.Bz]}),r})();var z=o(3848),K=o(5480),G=o(1620),X=o(4385),j=o(3546),H=o(6308),R=o(9041),A=o(3346),$=o(2673),b=o(3238),V=o(811),tt=o(4537),et=o(3189),rt=o(8567),nt=o(1572);let ot=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,w,z.Nh,K.q,G.o9,X.LD,j.QW,c.u5,c.UX,f.rP,H.JX,R.aE,R.bz,A.At,A.UU,$.g,Z.FA,O.c,b.XK,b.si,_.ot,V.vV,g.lN,tt.A0,et.h,rt.JX,nt.Cq]}),r})()}}]);