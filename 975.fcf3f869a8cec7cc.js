"use strict";(self.webpackChunkbase_project=self.webpackChunkbase_project||[]).push([[975],{5480:(U,c,r)=>{r.d(c,{q:()=>T});var u=r(4859),p=r(4144),m=r(4650);let T=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=m.oAB({type:l}),l.\u0275inj=m.cJS({imports:[u.ot,p.c]}),l})()},7975:(U,c,r)=>{r.r(c),r.d(c,{TurnOverReportModule:()=>V});var u=r(6895),p=r(2510),m=r(3846),T=r(5226),l=r.n(T),v=r(2340),t=r(4650),M=r(9639),x=r(2088),q=r(1397),C=r(1140),D=r(529),O=r(4859),h=r(9549),f=r(4144),d=r(4006),_=r(455),g=r(9602);function E(n,s){1&n&&(t.TgZ(0,"marquee",14),t._uU(1,"Reports available only for last 30 days"),t.qZA())}function y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",22)(2,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.searchTerminal())}),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(e.userData.userName),t.xp6(2),t.Oqu(e.turnOverreport.total_bet.toFixed(2)),t.xp6(2),t.Oqu(e.turnOverreport.total_win_claimed.toFixed(2)),t.xp6(2),t.Oqu(e.turnOverreport.total_win_unclaimed.toFixed(2)),t.xp6(2),t.Oqu(e.turnOverreport.profit.toFixed(2)),t.xp6(2),t.Oqu(e.turnOverreport.total_commission.toFixed(2))}}function S(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"table",15)(1,"thead")(2,"tr")(3,"th",16)(4,"mat-slide-toggle",17),t.NdJ("change",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.onToggleSuperStockist(o))}),t._uU(5,"All "),t.qZA()(),t.TgZ(6,"th",18)(7,"label"),t._uU(8,"Search"),t.qZA(),t.TgZ(9,"input",19),t.NdJ("ngModelChange",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.superStockistSearch=o)}),t.qZA()()(),t.TgZ(10,"tr")(11,"th",20),t._uU(12,"S Name"),t.qZA(),t.TgZ(13,"th",20),t._uU(14,"Total Bet"),t.qZA(),t.TgZ(15,"th",20),t._uU(16,"Total Win Claimed"),t.qZA(),t.TgZ(17,"th",20),t._uU(18,"Total Win Unclaimed"),t.qZA(),t.TgZ(19,"th",20),t._uU(20,"Profit"),t.qZA(),t.TgZ(21,"th",20),t._uU(22,"Total Commission"),t.qZA()()(),t.TgZ(23,"tbody"),t.YNc(24,y,14,6,"tr",21),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("checked",1==e.superStockistToggle),t.xp6(5),t.Q6J("ngModel",e.superStockistSearch),t.xp6(15),t.Q6J("ngIf",e.turnOverreport)}}function k(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"button",25),t.NdJ("click",function(){const i=t.CHM(e).$implicit,Z=t.oxw(2);return t.KtG(Z.searchTerminalBarCode(i))}),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA()()}if(2&n){const e=s.$implicit,a=s.index;t.xp6(2),t.Oqu(a+1),t.xp6(3),t.Oqu(e.terminal_name),t.xp6(2),t.Oqu(e.total_bet),t.xp6(2),t.Oqu(e.total_win_claimed),t.xp6(2),t.Oqu(e.total_win_unclaimed),t.xp6(2),t.Oqu(e.profit),t.xp6(2),t.Oqu(e.total_commission),t.xp6(2),t.Oqu((e.total_bet-e.total_commission-e.total_win_claimed).toFixed(2))}}function F(n,s){if(1&n&&(t.TgZ(0,"table",15)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Sl No."),t.qZA(),t.TgZ(5,"th",20),t._uU(6,"T Name"),t.qZA(),t.TgZ(7,"th",20),t._uU(8,"Total Bet"),t.qZA(),t.TgZ(9,"th",20),t._uU(10,"Total Win Claimed"),t.qZA(),t.TgZ(11,"th",20),t._uU(12,"Total Win Unclaimed"),t.qZA(),t.TgZ(13,"th",20),t._uU(14,"Profit"),t.qZA(),t.TgZ(15,"th",20),t._uU(16,"Total Commission"),t.qZA(),t.TgZ(17,"th",20),t._uU(18,"NTP"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,k,18,8,"tr",24),t.qZA()()),2&n){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.terminalTurnOverReport)}}function J(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td")(2,"button",26),t._uU(3),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA()()),2&n){const e=s.$implicit;t.xp6(3),t.Oqu(e.barcode_number),t.xp6(2),t.Oqu(e.draw_time),t.xp6(2),t.Oqu(e.terminal_pin),t.xp6(2),t.Oqu("SINGLE DOUBLE TRIPLE"==e.game_name?"Triple chance":e.game_name),t.xp6(2),t.Oqu(e.ticket_taken_time),t.xp6(2),t.Oqu(e.total_quantity),t.xp6(2),t.Oqu(e.amount),t.xp6(2),t.Oqu(e.prize_value>0&&0==e.is_claimed?e.prize_value:"--"),t.xp6(2),t.Oqu(e.prize_value>0&&1==e.is_claimed?e.prize_value:"--"),t.xp6(2),t.Oqu(1==e.is_cancelled?"Yes":"No"),t.xp6(2),t.Oqu(e.result),t.xp6(2),t.Oqu(1==e.bonus?"N":e.bonus+"X")}}function N(n,s){if(1&n&&(t.TgZ(0,"table",15)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Barcode"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Draw time"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Terminal"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Game"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Ticket take time"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Qty"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Play"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"UnClaimed"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Claimed"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Cancelled"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Result"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Bonus"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,J,26,12,"tr",24),t.qZA()()),2&n){const e=t.oxw();t.xp6(28),t.Q6J("ngForOf",e.barcodeReportRecords)}}const I=[{path:"",canActivate:[m.C],component:(()=>{class n{constructor(e,a,o,i,Z){this.stockistReportService=e,this.masterTerminalService=a,this.gameService=o,this.adminReportService=i,this.http=Z,this.thisYear=(new Date).getFullYear(),this.thisMonth=(new Date).getMonth(),this.thisDay=(new Date).getDate(),this.startDate=new Date(this.thisYear,this.thisMonth,this.thisDay),this.maxDate=new Date(this.thisYear,this.thisMonth,this.thisDay),this.minDate=new Date(this.thisYear,this.thisMonth,this.thisDay-30),this.StartDateFilter=this.startDate,this.EndDateFilter=this.startDate,this.pipe=new u.uU("en-US"),this.turnOverReportRecords=[],this.copyTurnOverReportRecords=[],this.terminals=[],this.stockistTurnOverReport=[],this.terminalTurnOverReport=[],this.stockistTurnOverReportEnabled=!0,this.terminalTurnOverReportEnabled=!1,this.terminalBarcodeTurnOverReportEnabled=!1,this.superStockistToggle=0,this.superStockistSearch=null,this.barcodeReportRecords=[],this.BASE_API_URL=v.N.BASE_API_URL,this.userData=JSON.parse(localStorage.getItem("user"))}ngOnInit(){this.games=this.gameService.getGame(),this.gameService.getGameListener().subscribe(e=>{this.games=e}),this.terminals=this.masterTerminalService.getTerminals(),this.masterTerminalService.getTerminalListener().subscribe(e=>{this.terminals=e})}searchTurnOverReport(){l().fire({title:"Please Wait !",html:"loading ...",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}});const e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),a=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.stockistReportService.turnOverReport(e,a,this.userData.userId).subscribe(o=>{1===o.success&&(l().close(),this.turnOverreport=o.data,this.stockistTurnOverReportEnabled=!0,this.terminalTurnOverReportEnabled=!1,this.terminalBarcodeTurnOverReportEnabled=!1)})}searchTerminal(){this.userData=JSON.parse(localStorage.getItem("user")),l().fire({title:"Please Wait !",html:"It may take some time....",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}});const e=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),a=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.adminReportService.adminTerminalOverStockist(e,a,this.userData.userId).subscribe(o=>{o.data&&(l().close(),this.terminalTurnOverReport=o.data,this.stockistTurnOverReportEnabled=!1,this.terminalTurnOverReportEnabled=!0)})}searchTerminalBarCode(e){l().fire({title:"Please Wait !",html:"It may take some time....",allowOutsideClick:!1,didOpen:()=>{l().showLoading()}});const a=this.pipe.transform(this.StartDateFilter,"yyyy-MM-dd"),o=this.pipe.transform(this.EndDateFilter,"yyyy-MM-dd");this.http.post(this.BASE_API_URL+"/terminal/turnOverReport",{startDate:a,endDate:o,terminalId:e.terminal_id}).subscribe(i=>{l().close(),this.barcodeReportRecords=i.data,this.terminalTurnOverReportEnabled=!1,this.stockistTurnOverReportEnabled=!1,this.terminalBarcodeTurnOverReportEnabled=!0})}revertBack(){!0===this.terminalTurnOverReportEnabled?(this.terminalTurnOverReportEnabled=!1,this.stockistTurnOverReportEnabled=!0,this.terminalBarcodeTurnOverReportEnabled=!1):!0===this.stockistTurnOverReportEnabled?(this.terminalTurnOverReportEnabled=!1,this.stockistTurnOverReportEnabled=!1,this.terminalBarcodeTurnOverReportEnabled=!1):!0===this.terminalBarcodeTurnOverReportEnabled&&(this.terminalTurnOverReportEnabled=!0,this.stockistTurnOverReportEnabled=!1,this.terminalBarcodeTurnOverReportEnabled=!1)}onToggleSuperStockist(e){this.superStockistToggle=!0===e.checked?1:0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.r),t.Y36(x.S),t.Y36(q.h),t.Y36(C.Q),t.Y36(D.eN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-turn-over-report"]],decls:27,vars:15,consts:[["behavior","","class","blink","direction","","style","color: red !important;",4,"ngIf"],[1,"pt-1","d-flex"],[1,"col"],["appearance","fill"],["matInput","",3,"max","min","matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],[3,"ngModel","ngModelChange"],["picker",""],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["picker1",""],["mat-button","","color","accent",2,"font-size","20px",3,"click"],["mat-button","",3,"hidden","click"],[1,"material-icons"],["class","table table-bordered table-dark",4,"ngIf"],["behavior","","direction","",1,"blink",2,"color","red !important"],[1,"table","table-bordered","table-dark"],["scope","colgroup","colspan","3",1,"text-center"],[3,"checked","change"],["scope","colgroup","colspan","2",1,"text-center"],["placeholder","Super Stockist Search",1,"col-12",3,"ngModel","ngModelChange"],["scope","col"],[4,"ngIf"],[2,"color","yellow"],[1,"mat-button",3,"click"],[4,"ngFor","ngForOf"],["mat-button","",2,"color","yellow",3,"click"],[1,"btn",2,"color","white !important"]],template:function(e,a){if(1&e&&(t.YNc(0,E,2,0,"marquee",0),t.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"Start date"),t.qZA(),t.TgZ(6,"input",4),t.NdJ("ngModelChange",function(i){return a.StartDateFilter=i}),t.qZA(),t._UZ(7,"mat-datepicker-toggle",5),t.TgZ(8,"mat-datepicker",6,7),t.NdJ("ngModelChange",function(i){return a.StartDateFilter=i}),t.qZA()()(),t.TgZ(10,"div",2)(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"End date"),t.qZA(),t.TgZ(14,"input",8),t.NdJ("ngModelChange",function(i){return a.EndDateFilter=i}),t.qZA(),t._UZ(15,"mat-datepicker-toggle",5),t.TgZ(16,"mat-datepicker",6,9),t.NdJ("ngModelChange",function(i){return a.EndDateFilter=i}),t.qZA()()(),t.TgZ(18,"button",10),t.NdJ("click",function(){return a.searchTurnOverReport()}),t._uU(19,"Search"),t.qZA()(),t.TgZ(20,"div")(21,"button",11),t.NdJ("click",function(){return a.revertBack()}),t.TgZ(22,"span",12),t._uU(23,"arrow_back"),t.qZA()(),t.YNc(24,S,25,3,"table",13),t.YNc(25,F,21,1,"table",13),t.YNc(26,N,29,1,"table",13),t.qZA()),2&e){const o=t.MAs(9),i=t.MAs(17);t.Q6J("ngIf",a.stockistTurnOverReportEnabled),t.xp6(6),t.Q6J("max",a.maxDate)("min",a.minDate)("matDatepicker",o)("ngModel",a.StartDateFilter),t.xp6(1),t.Q6J("for",o),t.xp6(1),t.Q6J("ngModel",a.StartDateFilter),t.xp6(6),t.Q6J("matDatepicker",i)("ngModel",a.EndDateFilter),t.xp6(1),t.Q6J("for",i),t.xp6(1),t.Q6J("ngModel",a.EndDateFilter),t.xp6(5),t.Q6J("hidden",a.stockistTurnOverReportEnabled),t.xp6(3),t.Q6J("ngIf",a.stockistTurnOverReportEnabled),t.xp6(1),t.Q6J("ngIf",a.terminalTurnOverReportEnabled),t.xp6(1),t.Q6J("ngIf",a.terminalBarcodeTurnOverReportEnabled)}},dependencies:[u.sg,u.O5,O.lW,h.KE,h.hX,h.R9,f.Nt,d.Fj,d.JJ,d.On,_.Rr,g.Mq,g.hl,g.nW],styles:[".blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blinker 1.5s linear infinite;color:red;font-family:sans-serif}@keyframes _ngcontent-%COMP%_blinker{50%{opacity:0}}"]}),n})()}];let P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(I),p.Bz]}),n})();var Q=r(3848),Y=r(5480),L=r(1620),W=r(4385),z=r(3546),K=r(6308),R=r(9041),A=r(3346),G=r(2673),b=r(3238),X=r(811),j=r(4537),w=r(3189),H=r(8567),$=r(1572);let V=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,P,Q.Nh,Y.q,L.o9,W.LD,z.QW,d.u5,d.UX,_.rP,K.JX,R.aE,R.bz,A.At,A.UU,G.g,g.FA,f.c,b.XK,b.si,O.ot,X.vV,h.lN,j.A0,w.h,H.JX,$.Cq]}),n})()}}]);